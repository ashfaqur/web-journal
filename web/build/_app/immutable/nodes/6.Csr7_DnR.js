import"../chunks/DsnmJJEf.js";import"../chunks/DmpBFSAq.js";import{s as b,o as V}from"../chunks/sj2ceDET.js";import{p as A,f as D,d as r,r as t,g as c,i as g,j as L,t as W,a as k,e as G,c as X,h as M,W as R}from"../chunks/BNTUZOXl.js";import{i as $}from"../chunks/CxFcOU2T.js";import{e as q,i as z}from"../chunks/DjYGhFoA.js";import{i as B}from"../chunks/Da-rjtur.js";import{c as E}from"../chunks/C9ZCAaT3.js";import{s as H,a as J}from"../chunks/B0Yvt91p.js";import{L as K}from"../chunks/BNVTlgUd.js";var Q=D('<div class="flex flex-col items-center pb-5 pt-5 text-center"><h1 class="mb-4 text-3xl font-bold"> </h1> <div class="mb-4 flex flex-row items-center gap-2"><progress class="progress progress-primary h-9 w-72"></progress> <div class="text-sm font-bold text-black"> </div></div> <!> <div class="mt-2 text-lg text-gray-600"><p> </p> <p> </p></div></div>');function S(y,o){A(o,!0);let s=o.progress.data;console.log("Progress component received data:",s);const x=`progress-plot-${o.progress.title.replace(/[\s-]+/g,"").toLowerCase()}`,p=s[s.length-1]?.totalProgress||0;console.log(`Rendering progress component for "${o.progress.title}" with latest progress: ${p}%`);const d=s.slice(-90),a=s.slice(-30);let v=0,h=1/0;if(a.length>0){const i=a.at(-1).totalProgress;let n=i,f=1;for(let _=a.length-2;_>=0;_--){const F=a[_].totalProgress;if(F<=n)n=F,f=a.length-_;else break}v=(i-n)/f,h=v>0?Math.ceil((100-i)/v):1/0}else console.log("No progress data available");var u=Q(),m=r(u),e=r(m,!0);t(m);var l=c(m,2),P=r(l);H(P,"max",100);var C=c(P,2),N=r(C);t(C),t(l);var I=c(l,2);{let i=L(()=>d.map(f=>f.date)),n=L(()=>d.map(f=>f.totalProgress));K(I,{title:"Progress over days",get plotId(){return x},xaxis:"Date",yaxis:"Progression (%)",displayXAxisGap:5,get x(){return g(i)},get y(){return g(n)},yRange:[0,100]})}var T=c(I,2),w=r(T),O=r(w);t(w);var j=c(w,2),U=r(j);t(j),t(T),t(u),W((i,n)=>{b(e,o.progress.title),J(P,p),b(N,`${p??""}%`),b(O,`Current Rate: ${i??""}%`),b(U,`Days to Complete: ${n??""}`)},[()=>v.toFixed(2),()=>Math.ceil(h)]),k(y,u),G()}var Y=D('<div class="rounded bg-yellow-200 px-4 py-2 text-center"><p class="text-yellow-900">Displaying fallback data due to fetch error.</p></div>'),Z=D('<section><div class="container flex min-w-full items-center justify-center bg-green-400 px-6 py-1"><h3 class="text-2xl"></h3></div></section> <!> <section></section>',1);function ge(y,o){A(o,!1);let s=R([]),x=R(!1);V(async()=>{const e=await E();M(s,e.data),M(x,e.isFallback),console.log("Progress data loaded:",g(s),"Is fallback:",g(x))}),B();var p=Z(),d=X(p),a=r(d),v=r(a);v.textContent="Progress",t(a),t(d);var h=c(d,2);{var u=e=>{var l=Y();k(e,l)};$(h,e=>{g(x)&&e(u)})}var m=c(h,2);q(m,5,()=>g(s),z,(e,l)=>{S(e,{get progress(){return g(l)}})}),t(m),k(y,p),G()}export{ge as component};
