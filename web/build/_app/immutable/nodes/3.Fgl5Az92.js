import{t as X,a as Y}from"../chunks/disclose-version.Dw065vl9.js";import{Z as ae,b as te,_ as re,$ as q,a as F,a0 as ne,a1 as se,N as ie,a2 as O,a3 as le,h as E,a4 as ue,a5 as w,r as G,a6 as fe,a7 as oe,a8 as ve,a9 as ce,C as S,aa as de,p as _e,s as H,ab as he,c as me,H as ge,d as B,e as M,f as T,ac as pe,ad as xe,g as U,i as Z,j as z,k as J,n as g,t as N,m as K,o as Q,l as P,q as R}from"../chunks/runtime.D36V6AQr.js";import{p as D,o as W}from"../chunks/index-client.BChc9jGc.js";import{f as ye,b as Ce}from"../chunks/api.CqAzunuz.js";import{P as Ee}from"../chunks/PlotBar.DNtRdV6i.js";import{L as be}from"../chunks/LineChart.uTbFSVHd.js";function Ne(s,e){return e}function Te(s,e,a,l){for(var o=[],u=e.length,i=0;i<u;i++)fe(e[i].e,o,!0);var _=u>0&&o.length===0&&a!==null;if(_){var d=a.parentNode;oe(d),d.append(a),l.clear(),y(s,e[0].prev,e[u-1].next)}ve(o,()=>{for(var v=0;v<u;v++){var t=e[v];_||(l.delete(t.k),y(s,t.prev,t.next)),ce(t.e,!_)}})}function Ae(s,e,a,l,o,u=null){var i=s,_={items:new Map,first:null};{var d=s;i=E?H(he(d)):d.appendChild(ae())}E&&me();var v=null,t=!1;te(()=>{var c=a(),r=re(c)?c:c==null?[]:q(c),n=r.length;if(t&&n===0)return;t=n===0;let h=!1;if(E){var b=i.data===ge;b!==(n===0)&&(i=B(),H(i),M(!1),h=!0)}if(E){for(var x=null,f,m=0;m<n;m++){if(T.nodeType===8&&T.data===pe){i=T,h=!0,M(!1);break}var A=r[m],C=l(A,m);f=j(T,_,x,null,A,C,m,o,e),_.items.set(C,f),x=f}n>0&&H(B())}if(!E){var p=de;we(r,_,i,o,e,(p.f&w)!==0,l)}u!==null&&(n===0?v?G(v):v=F(()=>u(i)):v!==null&&_e(v,()=>{v=null})),h&&M(!0),a()}),E&&(i=T)}function we(s,e,a,l,o,u,i){var _=s.length,d=e.items,v=e.first,t=v,c,r=null,n=[],h=[],b,x,f,m;for(m=0;m<_;m+=1){if(b=s[m],x=i(b,m),f=d.get(x),f===void 0){var A=t?t.e.nodes_start:a;r=j(A,e,r,r===null?e.first:r.next,b,x,m,l,o),d.set(x,r),n=[],h=[],t=r.next;continue}if(De(f,b,m),f.e.f&w&&G(f.e),f!==t){if(c!==void 0&&c.has(f)){if(n.length<h.length){var C=h[0],p;r=C.prev;var L=n[0],I=n[n.length-1];for(p=0;p<n.length;p+=1)V(n[p],C,a);for(p=0;p<h.length;p+=1)c.delete(h[p]);y(e,L.prev,I.next),y(e,r,L),y(e,I,C),t=C,r=I,m-=1,n=[],h=[]}else c.delete(f),V(f,t,a),y(e,f.prev,f.next),y(e,f,r===null?e.first:r.next),y(e,r,f),r=f;continue}for(n=[],h=[];t!==null&&t.k!==x;)(u||!(t.e.f&w))&&(c??(c=new Set)).add(t),h.push(t),t=t.next;if(t===null)continue;f=t}n.push(f),r=f,t=f.next}if(t!==null||c!==void 0){for(var k=c===void 0?[]:q(c);t!==null;)(u||!(t.e.f&w))&&k.push(t),t=t.next;var $=k.length;if($>0){var ee=_===0?a:null;Te(e,k,ee,d)}}S.first=e.first&&e.first.e,S.last=r&&r.e}function De(s,e,a,l){ue(s.v,e),s.i=a}function j(s,e,a,l,o,u,i,_,d){var v=(d&ne)!==0,t=(d&se)===0,c=v?t?ie(o):O(o):o,r=d&le?O(i):i,n={i:r,v:c,k:u,a:null,e:null,prev:a,next:l};try{return n.e=F(()=>_(s,c,r),E),n.e.prev=a&&a.e,n.e.next=l&&l.e,a===null?e.first=n:(a.next=n,a.e.next=n.e),l!==null&&(l.prev=n,l.e.prev=n.e),n}finally{}}function V(s,e,a){for(var l=s.next?s.next.e.nodes_start:a,o=e?e.e.nodes_start:a,u=s.e.nodes_start;u!==l;){var i=xe(u);o.before(u),u=i}}function y(s,e,a){e===null?s.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}var Ie=X("<!> <!>",1);function ke(s,e){U(e,!0);let a=Z(D([]));W(async()=>{const r=await ye(e.counterName,180);r.isFallback||z(a,D(r.data.map(([n,,h])=>[n,h])))});var l=Ie(),o=J(l),u=N(()=>`"${e.counterName}" over last 30 days`),i=N(()=>e.counts.map(r=>r.date)),_=N(()=>e.counts.map(r=>r.count));Ee(o,{get title(){return g(u)},xaxis:"Date",yaxis:"Count",get x(){return g(i)},get y(){return g(_)}});var d=K(o,2),v=N(()=>`"${e.counterName}" (Cumulative) over last 180 days`),t=N(()=>g(a).map(([r])=>r)),c=N(()=>g(a).map(([,r])=>r));be(d,{get title(){return g(v)},xaxis:"Date",yaxis:"Cumulative Count",displayXAxisGap:2,get x(){return g(t)},get y(){return g(c)}}),Y(s,l),Q()}var He=X('<section><div class="container flex min-w-full items-center justify-center bg-green-400 px-6 py-1"><h3 class="text-2xl"></h3></div></section> <section></section>',1);function Pe(s,e){U(e,!0);const a="Counter";let l=Z(D({}));W(async()=>{const v=await Ce(30);z(l,D(v.data))});var o=He(),u=J(o),i=P(u),_=P(i);_.textContent=a,R(i),R(u);var d=K(u,2);Ae(d,21,()=>Object.entries(g(l)),Ne,(v,t)=>{let c=()=>g(t)[0],r=()=>g(t)[1];ke(v,{get counterName(){return c()},get counts(){return r()}})}),R(d),Y(s,o),Q()}export{Pe as component};
