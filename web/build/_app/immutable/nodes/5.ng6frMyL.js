import"../chunks/DsnmJJEf.js";import{y as G,f as b,t as H,a as _,d as D,r as p,p as P,s as m,b as x,u as z,c as L,e as C,h as g,g as k,i as r,j as w}from"../chunks/BNTUZOXl.js";import{e as N,i as T}from"../chunks/DjYGhFoA.js";import{s as I,d as S}from"../chunks/sj2ceDET.js";import{i as M}from"../chunks/CxFcOU2T.js";import{p as O}from"../chunks/BMRxCDaR.js";import{P as j}from"../chunks/DvD85MsE.js";import{P as E}from"../chunks/C0kS4GU3.js";import{p as R,e as W,g as B}from"../chunks/C9ZCAaT3.js";import{P as F,s as U}from"../chunks/B0Yvt91p.js";function X(s,e,t){var a=s==null?"":""+s;return a===""?null:a}function q(s,e,t,a,l,u){var i=s.__className;if(G||i!==t||i===void 0){var o=X(t);(!G||o!==s.getAttribute("class"))&&(o==null?s.removeAttribute("class"):s.className=o),s.__className=t}return u}var J=b('<div class="container flex min-w-full items-center justify-center bg-green-400 px-6 py-1"><h3 class="text-2xl"> </h3></div>');function K(s,e){var t=J(),a=D(t),l=D(a,!0);p(a),p(t),H(()=>I(l,e.title)),_(s,t)}var Q=b("<button> </button>");function Y(s,e){var t=Q();t.__click=function(...l){e.onclick?.apply(this,l)};var a=D(t);p(t),H(()=>{q(t,1,`btn border-green-400 hover:bg-green-500 ${e.selected?"bg-green-500":"bg-green-300"} `),I(a,`${e.text??""} Days`)}),_(s,t)}S(["click"]);var Z=b('<div class="mb-1 mt-1 min-w-full rounded bg-yellow-200 px-4 py-2 text-center"><p class="text-yellow-900"> </p></div>');function A(s,e){var t=Z(),a=D(t),l=D(a,!0);p(a),p(t),H(()=>I(l,e.text)),_(s,t)}var $=b("<!> <!> <!>",1);function tt(s,e){P(e,!0),O(e,"displayXAxisGap",3,1);let t=m(!1),a=m(x([])),l=m(x([])),u=m(x([])),i=m(x(new Map));const o={None:"gray",Complete:"green",Incomplete:"orange"};async function h(){const n=await R(e.days);console.log("Last days data loaded:",n),g(a,n.dates,!0),g(l,n.points,!0),g(u,n.states,!0),g(i,n.stateCounts,!0),g(t,n.fallback,!0)}z(()=>{h()});var y=$(),v=L(y);{var c=n=>{A(n,{text:"Showing mock data due to fetch error"})};M(v,n=>{r(t)&&n(c)})}var f=k(v,2);{let n=w(()=>`Points earned over the last ${e.days} Days`);j(f,{get title(){return r(n)},xaxis:"Date",yaxis:"Points",get x(){return r(a)},get y(){return r(l)},get states(){return r(u)},get stateColors(){return o}})}var d=k(f,2);E(d,{title:"Percentage of days having entries",get chart(){return r(i)},get stateColors(){return o},get fallback(){return r(t)}}),_(s,y),C()}var et=b('<div class="w-full"></div>');function at(s,e){P(e,!0);let t=O(e,"plotId",3,"heatmap");const a=[[0,"rgb(148, 7, 7)"],[.5,"rgb(235, 242, 237)"],[1,"rgb(15, 163, 2)"]],l=60,u=45,i=100,o=-10,h=10;let y=w(()=>e.xValues.length>10?u:l),v=w(()=>[{x:e.xValues,y:e.yValues,z:e.zValues,type:"heatmap",colorscale:a,zmin:o,zmax:h,showscale:!1}]),c=w(()=>({title:{text:e.title,font:{size:20}},annotations:[],xaxis:{ticks:"",side:"top"},yaxis:{ticks:"",ticksuffix:" "},height:e.yValues.length*r(y)+i,autosize:!0,plot_bgcolor:"#000000"}));const f={responsive:!0};z(()=>{F.newPlot(t(),r(v),r(c),f)});var d=et();H(()=>U(d,"id",t())),_(s,d),C()}var st=b("<!> <!>",1);function rt(s,e){P(e,!0);let t=m(!1),a=m(x([])),l=m(x([])),u=m(x([]));async function i(){const c=await W(e.days);console.log("Habit data loaded:",c);const f=c.data;if(g(t,c.isFallback,!0),g(l,f.map(d=>d.name.charAt(0).toUpperCase()+d.name.slice(1).toLowerCase()),!0),f.length>0){const d=Object.keys(f[0].data).sort((n,V)=>n.localeCompare(V));d.length>7?g(a,d,!0):g(a,B(d),!0),g(u,f.map(n=>d.map(V=>n.data[V]??0)),!0)}}z(()=>{i()});var o=st(),h=L(o);{var y=c=>{A(c,{text:"Showing mock data due to fetch error"})};M(h,c=>{r(t)&&c(y)})}var v=k(h,2);at(v,{title:"Habits",get xValues(){return r(a)},get yValues(){return r(l)},get zValues(){return r(u)}}),_(s,o),C()}var lt=b('<div class="container flex min-w-full flex-col items-center"><!> <div class="btn-group mt-1 space-x-1"></div> <!> <!></div>');function ht(s){const e="Last Days",t=[7,30];let a=m(x(t[0]));var l=lt(),u=D(l);K(u,{title:e});var i=k(u,2);N(i,21,()=>t,T,(y,v)=>{{let c=w(()=>r(v).toString()),f=w(()=>r(a)===r(v));Y(y,{get text(){return r(c)},get selected(){return r(f)},onclick:()=>g(a,r(v),!0)})}}),p(i);var o=k(i,2);tt(o,{get days(){return r(a)}});var h=k(o,2);rt(h,{get days(){return r(a)}}),p(l),_(s,l)}export{ht as component};
